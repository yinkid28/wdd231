function setupEventListeners(){menuToggle&&navMenu&&menuToggle.addEventListener("click",()=>{navMenu.classList.toggle("show")}),themeToggle&&themeToggle.addEventListener("click",toggleTheme),document.addEventListener("click",e=>{e.target.closest("nav")||e.target.closest(".menu-toggle")||navMenu&&navMenu.classList.remove("show")}),window.addEventListener("resize",()=>{window.innerWidth>768&&navMenu&&navMenu.classList.remove("show")})}function initializeTheme(){const e=localStorage.getItem("chamber-theme")||"light";document.documentElement.setAttribute("data-theme",e),updateThemeIcon(e)}function toggleTheme(){const e=document.documentElement.getAttribute("data-theme")||"light",t="light"===e?"dark":"light";document.documentElement.setAttribute("data-theme",t),localStorage.setItem("chamber-theme",t),updateThemeIcon(t)}function updateThemeIcon(e){themeToggle&&(themeToggle.textContent="light"===e?"🌙":"☀️",themeToggle.setAttribute("aria-label",`Switch to ${"light"===e?"dark":"light"} mode`))}function initializeModals(){const e=document.querySelectorAll(".info-btn"),t=document.querySelectorAll(".modal"),n=document.querySelectorAll(".close");e.forEach(e=>{e.addEventListener("click",function(){const e=this.getAttribute("data-modal"),t=document.getElementById(e);t&&(t.style.display="block",t.setAttribute("aria-hidden","false"),document.body.style.overflow="hidden")})}),n.forEach(e=>{e.addEventListener("click",function(){const e=this.closest(".modal");closeModal(e)})}),t.forEach(e=>{e.addEventListener("click",function(t){t.target===e&&closeModal(e)})}),document.addEventListener("keydown",function(e){if("Escape"===e.key){const e=document.querySelector('.modal[style*="block"]');e&&closeModal(e)}})}function closeModal(e){e.style.display="none",e.setAttribute("aria-hidden","true"),document.body.style.overflow="auto"}function initializeFormValidation(){const e=document.getElementById("membershipForm"),t=e.querySelectorAll("input[required], select[required]");t.forEach(e=>{e.addEventListener("blur",function(){validateField(this)}),e.addEventListener("input",function(){this.classList.contains("error")&&(this.classList.remove("error"),removeErrorMessage(this))})}),e.addEventListener("submit",function(n){let o=!0;if(t.forEach(e=>{validateField(e)||(o=!1)}),o){const e=document.getElementById("timestamp"),t=new Date;e.value=t.toISOString()}else{n.preventDefault();const t=e.querySelector(".error");t&&t.focus()}})}function validateField(e){const t=e.value.trim();let n=!0,o="";if(e.classList.remove("error"),removeErrorMessage(e),e.hasAttribute("required")&&!t&&(n=!1,o="This field is required."),"email"===e.type&&t){const e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;e.test(t)||(n=!1,o="Please enter a valid email address.")}if("orgTitle"===e.id&&t){const e=/^[A-Za-z\s\-]{7,}$/;e.test(t)||(n=!1,o="Title must be at least 7 characters and contain only letters, spaces, and hyphens.")}if("tel"===e.type&&t){const e=/^[\+]?[0-9\s\-\(\)]{10,}$/;e.test(t)||(n=!1,o="Please enter a valid phone number.")}return n||(e.classList.add("error"),showErrorMessage(e,o)),n}function showErrorMessage(e,t){const n=document.createElement("div");n.className="error-message",n.textContent=t,n.style.color="#e74c3c",n.style.fontSize="0.85rem",n.style.marginTop="0.25rem",e.parentNode.appendChild(n)}function removeErrorMessage(e){const t=e.parentNode.querySelector(".error-message");t&&t.remove()}function setCardAnimations(){const e=document.querySelectorAll(".membership-card"),t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.style.animationPlayState="running")})},{threshold:.1});e.forEach(e=>{t.observe(e)})}function smoothScrollTo(e){e.scrollIntoView({behavior:"smooth",block:"center"})}function updateFooterDates(){const e=(new Date).getFullYear(),t=new Date(document.lastModified),n=document.getElementById("currentYear"),o=document.getElementById("lastModified");n&&(n.textContent=e),o&&(o.textContent=t.toLocaleString())}const menuToggle=document.getElementById("menu-toggle"),navMenu=document.querySelector(".nav-menu"),themeToggle=document.getElementById("theme-toggle");document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("timestamp"),t=new Date;e.value=t.toISOString(),setupEventListeners(),initializeTheme(),initializeModals(),initializeFormValidation(),setCardAnimations(),updateFooterDates()}),document.addEventListener("keydown",function(e){if("Tab"===e.key){const t=document.querySelectorAll('input, select, textarea, button, a[href], [tabindex]:not([tabindex="-1"])'),n=(t[0],t[t.length-1],document.querySelector('.modal[style*="block"]'));if(n){const t=n.querySelectorAll('input, select, textarea, button, a[href], [tabindex]:not([tabindex="-1"])');if(t.length>0){const n=t[0],o=t[t.length-1];e.shiftKey?document.activeElement===n&&(e.preventDefault(),o.focus()):document.activeElement===o&&(e.preventDefault(),n.focus())}}}}),setInterval(()=>{const e=document.getElementById("timestamp");if(e&&!document.querySelector('.modal[style*="block"]')){const t=new Date;e.value=t.toISOString()}},3e4);